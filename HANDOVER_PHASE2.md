# ProEdit MVP - Phase 2 ÂÆüË£ÖÂºï„ÅçÁ∂ô„Åé„Éâ„Ç≠„É•„É°„É≥„Éà

> **‰ΩúÊàêÊó•**: 2025-10-14 (Êõ¥Êñ∞Áâà)  
> **ÁõÆÁöÑ**: Phase 2 Foundation „ÅÆÂÆåÂÖ®ÂÆüË£Ö  
> **ÂâçÊèê**: Phase 1 „ÅØ70%ÂÆå‰∫Ü„ÄÅPhase 2„Å´ÈÄ≤„ÇÄÊ∫ñÂÇô„ÅåÊï¥„Å£„Å¶„ÅÑ„Çã

---

## üéØ ÁèæÂú®„ÅÆÁä∂Ê≥Å„Çµ„Éû„É™„Éº

### Phase 1 ÂÆå‰∫ÜÁä∂Ê≥ÅÔºö70%

**‚úÖ ÂÆå‰∫Ü„Åó„Å¶„ÅÑ„ÇãÈ†ÖÁõÆ**
- Next.js 15 + React 19 „Éó„É≠„Ç∏„Çß„ÇØ„ÉàÂàùÊúüÂåñ
- Tailwind CSS v4 Ë®≠ÂÆöÂÆå‰∫Ü
- shadcn/ui ÂàùÊúüÂåñÔºà27„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàËøΩÂä†Ê∏à„ÅøÔºâ
- .env.local Ë®≠ÂÆöÔºàSupabaseË™çË®ºÊÉÖÂ†±Ôºâ
- .env.local.example ‰ΩúÊàê
- Prettier Ë®≠ÂÆöÔºà.prettierrc.json, .prettierignoreÔºâ
- next.config.ts „Å´ FFmpeg.wasm CORSË®≠ÂÆö
- „Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÈÄ†‰ΩúÊàêÔºàfeatures/, lib/, stores/, types/, tests/Ôºâ

**‚ö†Ô∏è Êú™ÂÆå‰∫Ü„ÅÆÈ†ÖÁõÆÔºàPhase 2„ÅßÂÆüË£ÖÔºâ**
- lib/supabase/ ÂÜÖ„ÅÆ„Éï„Ç°„Ç§„É´Ôºàclient.ts, server.tsÔºâ
- lib/ffmpeg/ ÂÜÖ„ÅÆ„Éï„Ç°„Ç§„É´Ôºàloader.tsÔºâ
- lib/pixi/ ÂÜÖ„ÅÆ„Éï„Ç°„Ç§„É´Ôºàsetup.tsÔºâ
- stores/ ÂÜÖ„ÅÆ„Éï„Ç°„Ç§„É´Ôºàindex.tsÔºâ
- types/ ÂÜÖ„ÅÆ„Éï„Ç°„Ç§„É´Ôºàeffects.ts, project.ts, media.ts, supabase.tsÔºâ
- „É¨„Ç§„Ç¢„Ç¶„Éà„Éï„Ç°„Ç§„É´Ôºàapp/(auth)/layout.tsx, app/(editor)/layout.tsxÔºâ
- „Ç®„É©„Éº„Éè„É≥„Éâ„É™„É≥„Ç∞Ôºàapp/error.tsx, app/loading.tsxÔºâ
- Adobe Premiere ProÈ¢®„ÉÜ„Éº„ÉûÈÅ©Áî®

---

## üìÇ ÁèæÂú®„ÅÆ„Éó„É≠„Ç∏„Çß„ÇØ„ÉàÊßãÈÄ†

```
/Users/teradakousuke/Developer/ProEdit/
‚îú‚îÄ‚îÄ .env.local                    ‚úÖ Ë®≠ÂÆöÊ∏à„Åø
‚îú‚îÄ‚îÄ .env.local.example            ‚úÖ ‰ΩúÊàêÊ∏à„Åø
‚îú‚îÄ‚îÄ .prettierrc.json              ‚úÖ Ë®≠ÂÆöÊ∏à„Åø
‚îú‚îÄ‚îÄ .prettierignore               ‚úÖ ‰ΩúÊàêÊ∏à„Åø
‚îú‚îÄ‚îÄ next.config.ts                ‚úÖ CORSË®≠ÂÆöÊ∏à„Åø
‚îú‚îÄ‚îÄ package.json                  ‚úÖ ‰æùÂ≠òÈñ¢‰øÇ„Ç§„É≥„Çπ„Éà„Éº„É´Ê∏à„Åø
‚îÇ
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ page.tsx                  ‚ö†Ô∏è „Éá„Éï„Ç©„É´„ÉàNext.js„Éö„Éº„Ç∏ÔºàÂæå„ÅßÁΩÆ„ÅçÊèõ„ÅàÔºâ
‚îÇ   ‚îú‚îÄ‚îÄ globals.css               ‚ö†Ô∏è Premiere ProÈ¢®„ÉÜ„Éº„ÉûÊú™ÈÅ©Áî®
‚îÇ   ‚îú‚îÄ‚îÄ (auth)/                   ‚ùå Êú™‰ΩúÊàê
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ layout.tsx            ‚ùå T019„Åß‰ΩúÊàê
‚îÇ   ‚îî‚îÄ‚îÄ (editor)/                 ‚ùå Êú™‰ΩúÊàê
‚îÇ       ‚îî‚îÄ‚îÄ layout.tsx            ‚ùå T019„Åß‰ΩúÊàê
‚îÇ
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ ui/                       ‚úÖ 27„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ accordion.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ alert-dialog.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ badge.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ button.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ card.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ checkbox.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ command.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ context-menu.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dialog.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dropdown-menu.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ form.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ input.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ label.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ menubar.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ popover.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ progress.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ radio-group.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ scroll-area.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ select.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ separator.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sheet.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ skeleton.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ slider.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sonner.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ switch.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tabs.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ tooltip.tsx
‚îÇ   ‚îî‚îÄ‚îÄ projects/                 ‚úÖ Â≠òÂú®ÔºàÁ©∫Ôºâ
‚îÇ
‚îú‚îÄ‚îÄ features/                     ‚úÖ „Éá„Ç£„É¨„ÇØ„Éà„É™Â≠òÂú®ÔºàÁ©∫Ôºâ
‚îÇ   ‚îú‚îÄ‚îÄ timeline/
‚îÇ   ‚îú‚îÄ‚îÄ compositor/
‚îÇ   ‚îú‚îÄ‚îÄ media/
‚îÇ   ‚îú‚îÄ‚îÄ effects/
‚îÇ   ‚îî‚îÄ‚îÄ export/
‚îÇ
‚îú‚îÄ‚îÄ lib/                          ‚úÖ „Éá„Ç£„É¨„ÇØ„Éà„É™Â≠òÂú®ÔºàÁ©∫Ôºâ
‚îÇ   ‚îú‚îÄ‚îÄ supabase/                 ‚ùå client.ts, server.tsÊú™‰ΩúÊàê
‚îÇ   ‚îú‚îÄ‚îÄ ffmpeg/                   ‚ùå loader.tsÊú™‰ΩúÊàê
‚îÇ   ‚îú‚îÄ‚îÄ pixi/                     ‚ùå setup.tsÊú™‰ΩúÊàê
‚îÇ   ‚îî‚îÄ‚îÄ utils/                    ‚úÖ Â≠òÂú®
‚îÇ       ‚îî‚îÄ‚îÄ utils.ts              ‚úÖ Â≠òÂú®
‚îÇ
‚îú‚îÄ‚îÄ stores/                       ‚úÖ „Éá„Ç£„É¨„ÇØ„Éà„É™Â≠òÂú®ÔºàÁ©∫Ôºâ
‚îÇ   ‚îî‚îÄ‚îÄ index.ts                  ‚ùå T012„Åß‰ΩúÊàê
‚îÇ
‚îú‚îÄ‚îÄ types/                        ‚úÖ „Éá„Ç£„É¨„ÇØ„Éà„É™Â≠òÂú®ÔºàÁ©∫Ôºâ
‚îÇ   ‚îú‚îÄ‚îÄ effects.ts                ‚ùå T016„Åß‰ΩúÊàê
‚îÇ   ‚îú‚îÄ‚îÄ project.ts                ‚ùå T017„Åß‰ΩúÊàê
‚îÇ   ‚îú‚îÄ‚îÄ media.ts                  ‚ùå T017„Åß‰ΩúÊàê
‚îÇ   ‚îî‚îÄ‚îÄ supabase.ts               ‚ùå T018„Åß‰ΩúÊàê
‚îÇ
‚îú‚îÄ‚îÄ tests/                        ‚úÖ „Éá„Ç£„É¨„ÇØ„Éà„É™Â≠òÂú®
‚îÇ   ‚îú‚îÄ‚îÄ e2e/
‚îÇ   ‚îú‚îÄ‚îÄ integration/
‚îÇ   ‚îî‚îÄ‚îÄ unit/
‚îÇ
‚îú‚îÄ‚îÄ specs/                        ‚úÖ ÂÖ®Ë®≠Ë®à„Éâ„Ç≠„É•„É°„É≥„Éà
‚îÇ   ‚îî‚îÄ‚îÄ 001-proedit-mvp-browser/
‚îÇ       ‚îú‚îÄ‚îÄ spec.md
‚îÇ       ‚îú‚îÄ‚îÄ plan.md
‚îÇ       ‚îú‚îÄ‚îÄ data-model.md         ‚ö†Ô∏è T008„Åß‰ΩøÁî®
‚îÇ       ‚îú‚îÄ‚îÄ tasks.md              ‚ö†Ô∏è „Çø„Çπ„ÇØË©≥Á¥∞
‚îÇ       ‚îî‚îÄ‚îÄ quickstart.md         ‚ö†Ô∏è T007,T011„Åß‰ΩøÁî®
‚îÇ
‚îî‚îÄ‚îÄ vendor/omniclip/              ‚úÖ ÂèÇÁÖßÂÆüË£Ö
    ‚îî‚îÄ‚îÄ OMNICLIP_IMPLEMENTATION_ANALYSIS.md
```

---

## üöÄ Phase 2: Foundation ÂÆüË£Ö„Çø„Çπ„ÇØÔºàT007-T021Ôºâ

### „ÄêÈáçË¶Å„ÄëPhase 2„ÅÆÁõÆÁöÑ
Phase 2„ÅØÂÖ®„É¶„Éº„Ç∂„Éº„Çπ„Éà„Éº„É™„ÉºÔºàUS1-US7ÔºâÂÆüË£Ö„ÅÆ**ÂøÖÈ†àÂü∫Áõ§**„Åß„Åô„ÄÇ
„Åì„ÅÆ„Éï„Çß„Éº„Ç∫„ÅåÂÆå‰∫Ü„Åô„Çã„Åæ„Åß„ÄÅË™çË®º„ÄÅ„Çø„Ç§„É†„É©„Ç§„É≥„ÄÅ„Ç®„Éï„Çß„ÇØ„Éà„ÄÅ„Ç®„ÇØ„Çπ„Éù„Éº„Éà„Å™„Å©„ÅÆÊ©üËÉΩÂÆüË£Ö„ÅØÈñãÂßã„Åß„Åç„Åæ„Åõ„Çì„ÄÇ

### Êé®ÂÆöÊâÄË¶ÅÊôÇÈñìÔºö8ÊôÇÈñì

---

## üìã ÂÆüË£Ö„Çø„Çπ„ÇØË©≥Á¥∞

### T007: Supabase„ÇØ„É©„Ç§„Ç¢„É≥„ÉàË®≠ÂÆö

**„Éï„Ç°„Ç§„É´**: `lib/supabase/client.ts`, `lib/supabase/server.ts`

**client.tsÔºà„Éñ„É©„Ç¶„Ç∂Áî®Ôºâ**:
```typescript
import { createBrowserClient } from '@supabase/ssr'

export function createClient() {
  return createBrowserClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
  )
}
```

**server.tsÔºà„Çµ„Éº„Éê„ÉºÁî®Ôºâ**:
```typescript
import { createServerClient } from '@supabase/ssr'
import { cookies } from 'next/headers'

export async function createClient() {
  const cookieStore = await cookies()

  return createServerClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,
    {
      cookies: {
        getAll() {
          return cookieStore.getAll()
        },
        setAll(cookiesToSet) {
          try {
            cookiesToSet.forEach(({ name, value, options }) =>
              cookieStore.set(name, value, options)
            )
          } catch {
            // Server ComponentÂÜÖ„Åß„ÅØÁÑ°Ë¶ñ
          }
        },
      },
    }
  )
}
```

**ÂøÖË¶Å„Å™‰æùÂ≠òÈñ¢‰øÇ**:
```bash
npm install --legacy-peer-deps @supabase/ssr @supabase/supabase-js
```

**ÂèÇÁÖß**: `specs/001-proedit-mvp-browser/quickstart.md`

---

### T008: „Éá„Éº„Çø„Éô„Éº„Çπ„Éû„Ç§„Ç∞„É¨„Éº„Ç∑„Éß„É≥

**ÂÆüË£ÖÂ†¥ÊâÄ**: Supabase SQL Editor „Åæ„Åü„ÅØ „É≠„Éº„Ç´„É´„Éû„Ç§„Ç∞„É¨„Éº„Ç∑„Éß„É≥

**ÊâãÈ†Ü**:
1. Supabase „ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ„Å´„Ç¢„ÇØ„Çª„Çπ
2. SQL Editor „ÇíÈñã„Åè
3. `specs/001-proedit-mvp-browser/data-model.md` „ÅÆ„Çπ„Ç≠„Éº„Éû„ÇíÂÆüË°å

**„ÉÜ„Éº„Éñ„É´‰∏ÄË¶ß**:
```sql
-- 1. projects „ÉÜ„Éº„Éñ„É´
CREATE TABLE projects (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES auth.users NOT NULL,
  name TEXT NOT NULL,
  settings JSONB DEFAULT '{}',
  thumbnail_url TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- 2. media_files „ÉÜ„Éº„Éñ„É´
CREATE TABLE media_files (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  project_id UUID REFERENCES projects ON DELETE CASCADE,
  user_id UUID REFERENCES auth.users NOT NULL,
  file_name TEXT NOT NULL,
  file_type TEXT NOT NULL,
  file_size BIGINT NOT NULL,
  storage_path TEXT NOT NULL,
  thumbnail_url TEXT,
  duration NUMERIC,
  width INTEGER,
  height INTEGER,
  metadata JSONB DEFAULT '{}',
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- 3. tracks „ÉÜ„Éº„Éñ„É´
CREATE TABLE tracks (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  project_id UUID REFERENCES projects ON DELETE CASCADE,
  track_type TEXT NOT NULL CHECK (track_type IN ('video', 'audio')),
  track_order INTEGER NOT NULL,
  is_locked BOOLEAN DEFAULT false,
  is_visible BOOLEAN DEFAULT true,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- 4. clips „ÉÜ„Éº„Éñ„É´
CREATE TABLE clips (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  track_id UUID REFERENCES tracks ON DELETE CASCADE,
  media_file_id UUID REFERENCES media_files ON DELETE CASCADE,
  start_time NUMERIC NOT NULL,
  duration NUMERIC NOT NULL,
  trim_start NUMERIC DEFAULT 0,
  trim_end NUMERIC DEFAULT 0,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- 5. effects „ÉÜ„Éº„Éñ„É´
CREATE TABLE effects (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  clip_id UUID REFERENCES clips ON DELETE CASCADE,
  effect_type TEXT NOT NULL,
  effect_data JSONB NOT NULL,
  effect_order INTEGER NOT NULL,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- 6. transitions „ÉÜ„Éº„Éñ„É´
CREATE TABLE transitions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  track_id UUID REFERENCES tracks ON DELETE CASCADE,
  transition_type TEXT NOT NULL,
  start_clip_id UUID REFERENCES clips,
  end_clip_id UUID REFERENCES clips,
  duration NUMERIC NOT NULL,
  transition_data JSONB DEFAULT '{}',
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- 7. export_jobs „ÉÜ„Éº„Éñ„É´
CREATE TABLE export_jobs (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  project_id UUID REFERENCES projects ON DELETE CASCADE,
  user_id UUID REFERENCES auth.users NOT NULL,
  status TEXT NOT NULL CHECK (status IN ('pending', 'processing', 'completed', 'failed')),
  progress NUMERIC DEFAULT 0,
  export_settings JSONB NOT NULL,
  output_url TEXT,
  error_message TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- „Ç§„É≥„Éá„ÉÉ„ÇØ„Çπ‰ΩúÊàê
CREATE INDEX idx_projects_user_id ON projects(user_id);
CREATE INDEX idx_media_files_project_id ON media_files(project_id);
CREATE INDEX idx_media_files_user_id ON media_files(user_id);
CREATE INDEX idx_tracks_project_id ON tracks(project_id);
CREATE INDEX idx_clips_track_id ON clips(track_id);
CREATE INDEX idx_effects_clip_id ON effects(clip_id);
CREATE INDEX idx_export_jobs_user_id ON export_jobs(user_id);
CREATE INDEX idx_export_jobs_status ON export_jobs(status);
```

**Á¢∫Ë™çÊñπÊ≥ï**:
```sql
-- „ÉÜ„Éº„Éñ„É´‰∏ÄË¶ßË°®Á§∫
SELECT table_name FROM information_schema.tables 
WHERE table_schema = 'public';
```

---

### T009: Row Level Security (RLS) „Éù„É™„Ç∑„ÉºË®≠ÂÆö

**ÂÆüË£ÖÂ†¥ÊâÄ**: Supabase SQL Editor

**RLS„Éù„É™„Ç∑„Éº**:
```sql
-- 1. projects „ÉÜ„Éº„Éñ„É´„ÅÆRLS
ALTER TABLE projects ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view own projects"
  ON projects FOR SELECT
  USING (auth.uid() = user_id);

CREATE POLICY "Users can create own projects"
  ON projects FOR INSERT
  WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can update own projects"
  ON projects FOR UPDATE
  USING (auth.uid() = user_id)
  WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can delete own projects"
  ON projects FOR DELETE
  USING (auth.uid() = user_id);

-- 2. media_files „ÉÜ„Éº„Éñ„É´„ÅÆRLS
ALTER TABLE media_files ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view own media files"
  ON media_files FOR SELECT
  USING (auth.uid() = user_id);

CREATE POLICY "Users can create own media files"
  ON media_files FOR INSERT
  WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can delete own media files"
  ON media_files FOR DELETE
  USING (auth.uid() = user_id);

-- 3. tracks „ÉÜ„Éº„Éñ„É´„ÅÆRLS
ALTER TABLE tracks ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can manage tracks in own projects"
  ON tracks FOR ALL
  USING (
    EXISTS (
      SELECT 1 FROM projects
      WHERE projects.id = tracks.project_id
      AND projects.user_id = auth.uid()
    )
  );

-- 4. clips „ÉÜ„Éº„Éñ„É´„ÅÆRLS
ALTER TABLE clips ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can manage clips in own tracks"
  ON clips FOR ALL
  USING (
    EXISTS (
      SELECT 1 FROM tracks
      JOIN projects ON projects.id = tracks.project_id
      WHERE tracks.id = clips.track_id
      AND projects.user_id = auth.uid()
    )
  );

-- 5. effects „ÉÜ„Éº„Éñ„É´„ÅÆRLS
ALTER TABLE effects ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can manage effects in own clips"
  ON effects FOR ALL
  USING (
    EXISTS (
      SELECT 1 FROM clips
      JOIN tracks ON tracks.id = clips.track_id
      JOIN projects ON projects.id = tracks.project_id
      WHERE clips.id = effects.clip_id
      AND projects.user_id = auth.uid()
    )
  );

-- 6. transitions „ÉÜ„Éº„Éñ„É´„ÅÆRLS
ALTER TABLE transitions ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can manage transitions in own tracks"
  ON transitions FOR ALL
  USING (
    EXISTS (
      SELECT 1 FROM tracks
      JOIN projects ON projects.id = tracks.project_id
      WHERE tracks.id = transitions.track_id
      AND projects.user_id = auth.uid()
    )
  );

-- 7. export_jobs „ÉÜ„Éº„Éñ„É´„ÅÆRLS
ALTER TABLE export_jobs ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view own export jobs"
  ON export_jobs FOR SELECT
  USING (auth.uid() = user_id);

CREATE POLICY "Users can create own export jobs"
  ON export_jobs FOR INSERT
  WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can update own export jobs"
  ON export_jobs FOR UPDATE
  USING (auth.uid() = user_id);
```

**Á¢∫Ë™çÊñπÊ≥ï**:
```sql
-- RLSÊúâÂäπÂåñÁ¢∫Ë™ç
SELECT tablename, rowsecurity 
FROM pg_tables 
WHERE schemaname = 'public';
```

---

### T010: Supabase StorageË®≠ÂÆö

**ÂÆüË£ÖÊñπÊ≥ï**: Supabase„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ > Storage

**ÊâãÈ†Ü**:
1. Storage > "Create a new bucket" „Çí„ÇØ„É™„ÉÉ„ÇØ
2. Ë®≠ÂÆö:
   - **Bucket name**: `media-files`
   - **Public bucket**: OFFÔºàË™çË®ºÂøÖÈ†àÔºâ
   - **File size limit**: 500 MB
   - **Allowed MIME types**: `video/*, audio/*, image/*`

**„Çπ„Éà„É¨„Éº„Ç∏„Éù„É™„Ç∑„ÉºÔºàSQL EditorÔºâ**:
```sql
-- media-files„Éê„Ç±„ÉÉ„Éà„ÅÆ„Éù„É™„Ç∑„ÉºË®≠ÂÆö
CREATE POLICY "Users can upload own media files"
  ON storage.objects FOR INSERT
  WITH CHECK (
    bucket_id = 'media-files' 
    AND auth.uid()::text = (storage.foldername(name))[1]
  );

CREATE POLICY "Users can view own media files"
  ON storage.objects FOR SELECT
  USING (
    bucket_id = 'media-files'
    AND auth.uid()::text = (storage.foldername(name))[1]
  );

CREATE POLICY "Users can delete own media files"
  ON storage.objects FOR DELETE
  USING (
    bucket_id = 'media-files'
    AND auth.uid()::text = (storage.foldername(name))[1]
  );
```

**„Éï„Ç°„Ç§„É´„Éë„ÇπÊßãÈÄ†**:
```
media-files/
  {user_id}/
    {project_id}/
      {file_name}
```

---

### T011: Google OAuthË®≠ÂÆö

**ÂÆüË£ÖÊñπÊ≥ï**: Supabase„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ > Authentication

**ÊâãÈ†Ü**:
1. Authentication > Providers > Google „ÇíÊúâÂäπÂåñ
2. Google Cloud Console„Åß OAuth 2.0 „ÇØ„É©„Ç§„Ç¢„É≥„ÉàID„Çí‰ΩúÊàê
3. ÊâøË™çÊ∏à„Åø„É™„ÉÄ„Ç§„É¨„ÇØ„ÉàURI„Å´ËøΩÂä†:
   ```
   https://blvcuxxwiykgcbsduhbc.supabase.co/auth/v1/callback
   http://localhost:3000/auth/callback
   ```
4. Client ID„Å®Client Secret„ÇíSupabase„Å´Ë®≠ÂÆö

**Next.js„Ç≥„Éº„É´„Éê„ÉÉ„ÇØ„É´„Éº„Éà‰ΩúÊàê**:
```typescript
// app/auth/callback/route.ts
import { createClient } from '@/lib/supabase/server'
import { NextResponse } from 'next/server'

export async function GET(request: Request) {
  const requestUrl = new URL(request.url)
  const code = requestUrl.searchParams.get('code')

  if (code) {
    const supabase = await createClient()
    await supabase.auth.exchangeCodeForSession(code)
  }

  return NextResponse.redirect(`${requestUrl.origin}/editor`)
}
```

**ÂèÇÁÖß**: `specs/001-proedit-mvp-browser/quickstart.md` „ÅÆË™çË®ºË®≠ÂÆö„Çª„ÇØ„Ç∑„Éß„É≥

---

### T012: Zustand storeÊßãÈÄ†

**„Éï„Ç°„Ç§„É´**: `stores/index.ts`

```typescript
import { create } from 'zustand'
import { devtools, persist } from 'zustand/middleware'

// Project Store Slice
interface ProjectState {
  currentProjectId: string | null
  projects: any[]
  setCurrentProject: (id: string | null) => void
  addProject: (project: any) => void
}

// Timeline Store Slice
interface TimelineState {
  currentTime: number
  duration: number
  isPlaying: boolean
  zoom: number
  setCurrentTime: (time: number) => void
  setIsPlaying: (playing: boolean) => void
}

// Media Store Slice
interface MediaState {
  mediaFiles: any[]
  selectedMedia: string[]
  addMediaFile: (file: any) => void
  selectMedia: (id: string) => void
}

// Compositor Store Slice
interface CompositorState {
  canvas: any | null
  setCanvas: (canvas: any) => void
}

// Combined Store
interface AppStore extends ProjectState, TimelineState, MediaState, CompositorState {}

export const useStore = create<AppStore>()(
  devtools(
    persist(
      (set) => ({
        // Project state
        currentProjectId: null,
        projects: [],
        setCurrentProject: (id) => set({ currentProjectId: id }),
        addProject: (project) => set((state) => ({ 
          projects: [...state.projects, project] 
        })),

        // Timeline state
        currentTime: 0,
        duration: 0,
        isPlaying: false,
        zoom: 1,
        setCurrentTime: (time) => set({ currentTime: time }),
        setIsPlaying: (playing) => set({ isPlaying: playing }),

        // Media state
        mediaFiles: [],
        selectedMedia: [],
        addMediaFile: (file) => set((state) => ({ 
          mediaFiles: [...state.mediaFiles, file] 
        })),
        selectMedia: (id) => set((state) => ({
          selectedMedia: state.selectedMedia.includes(id)
            ? state.selectedMedia.filter((mediaId) => mediaId !== id)
            : [...state.selectedMedia, id]
        })),

        // Compositor state
        canvas: null,
        setCanvas: (canvas) => set({ canvas }),
      }),
      {
        name: 'proedit-storage',
        partialize: (state) => ({
          currentProjectId: state.currentProjectId,
          zoom: state.zoom,
        }),
      }
    )
  )
)
```

**ÂøÖË¶Å„Å™‰æùÂ≠òÈñ¢‰øÇ**:
```bash
npm install --legacy-peer-deps zustand
```

---

### T013: PIXI.js v8ÂàùÊúüÂåñ

**„Éï„Ç°„Ç§„É´**: `lib/pixi/setup.ts`

```typescript
import * as PIXI from 'pixi.js'

export interface CompositorConfig {
  width: number
  height: number
  backgroundColor?: number
}

export async function initializePixi(
  canvas: HTMLCanvasElement,
  config: CompositorConfig
): Promise<PIXI.Application> {
  const app = new PIXI.Application()

  await app.init({
    canvas,
    width: config.width,
    height: config.height,
    backgroundColor: config.backgroundColor || 0x000000,
    resolution: window.devicePixelRatio || 1,
    autoDensity: true,
    antialias: true,
  })

  // WebGLÂØæÂøúÁ¢∫Ë™ç
  if (!app.renderer) {
    throw new Error('WebGL is not supported in this browser')
  }

  return app
}

export function cleanupPixi(app: PIXI.Application) {
  app.destroy(true, {
    children: true,
    texture: true,
    textureSource: true,
  })
}
```

**ÂøÖË¶Å„Å™‰æùÂ≠òÈñ¢‰øÇ**:
```bash
npm install --legacy-peer-deps pixi.js
```

**ÂèÇÁÖß**: `vendor/omniclip/s/context/controllers/compositor/`

---

### T014: FFmpeg.wasm„É≠„Éº„ÉÄ„Éº

**„Éï„Ç°„Ç§„É´**: `lib/ffmpeg/loader.ts`

```typescript
import { FFmpeg } from '@ffmpeg/ffmpeg'
import { toBlobURL } from '@ffmpeg/util'

let ffmpegInstance: FFmpeg | null = null

export interface FFmpegProgress {
  ratio: number
  time: number
}

export async function loadFFmpeg(
  onProgress?: (progress: FFmpegProgress) => void
): Promise<FFmpeg> {
  if (ffmpegInstance) {
    return ffmpegInstance
  }

  const ffmpeg = new FFmpeg()

  // „Éó„É≠„Ç∞„É¨„Çπ„Éè„É≥„Éâ„É©„Éº
  if (onProgress) {
    ffmpeg.on('progress', ({ progress, time }) => {
      onProgress({ ratio: progress, time })
    })
  }

  // „É≠„Ç∞„Éè„É≥„Éâ„É©„ÉºÔºàÈñãÁô∫Áí∞Â¢É„ÅÆ„ÅøÔºâ
  if (process.env.NODE_ENV === 'development') {
    ffmpeg.on('log', ({ message }) => {
      console.log('[FFmpeg]', message)
    })
  }

  // FFmpeg.wasmË™≠„ÅøËæº„Åø
  const baseURL = 'https://unpkg.com/@ffmpeg/core@0.12.6/dist/esm'
  
  await ffmpeg.load({
    coreURL: await toBlobURL(`${baseURL}/ffmpeg-core.js`, 'text/javascript'),
    wasmURL: await toBlobURL(`${baseURL}/ffmpeg-core.wasm`, 'application/wasm'),
  })

  ffmpegInstance = ffmpeg
  return ffmpeg
}

export function getFFmpegInstance(): FFmpeg | null {
  return ffmpegInstance
}

export async function unloadFFmpeg(): Promise<void> {
  if (ffmpegInstance) {
    ffmpegInstance.terminate()
    ffmpegInstance = null
  }
}
```

**ÂøÖË¶Å„Å™‰æùÂ≠òÈñ¢‰øÇ**:
```bash
npm install --legacy-peer-deps @ffmpeg/ffmpeg @ffmpeg/util
```

**ÂèÇÁÖß**: `OMNICLIP_IMPLEMENTATION_ANALYSIS.md` „ÅÆFFmpegÂÆüË£Ö„Çª„ÇØ„Ç∑„Éß„É≥

---

### T015: Supabase„É¶„Éº„ÉÜ„Ç£„É™„ÉÜ„Ç£

**„Éï„Ç°„Ç§„É´**: `lib/supabase/utils.ts`

```typescript
import { createClient } from './client'
import type { Database } from '@/types/supabase'

export async function uploadMediaFile(
  file: File,
  userId: string,
  projectId: string
): Promise<string> {
  const supabase = createClient()
  
  const fileName = `${Date.now()}-${file.name}`
  const filePath = `${userId}/${projectId}/${fileName}`

  const { data, error } = await supabase.storage
    .from('media-files')
    .upload(filePath, file)

  if (error) throw error

  return data.path
}

export async function getMediaFileUrl(path: string): Promise<string> {
  const supabase = createClient()
  
  const { data } = supabase.storage
    .from('media-files')
    .getPublicUrl(path)

  return data.publicUrl
}

export async function deleteMediaFile(path: string): Promise<void> {
  const supabase = createClient()
  
  const { error } = await supabase.storage
    .from('media-files')
    .remove([path])

  if (error) throw error
}
```

---

### T016: EffectÂûãÂÆöÁæ©

**„Éï„Ç°„Ç§„É´**: `types/effects.ts`

**ÂèÇÁÖßÂÖÉ**: `vendor/omniclip/s/context/types.ts`

```typescript
// „Éô„Éº„Çπ„Ç®„Éï„Çß„ÇØ„ÉàÂûã
export interface BaseEffect {
  id: string
  type: string
  enabled: boolean
  order: number
}

// „Éì„Éá„Ç™„Ç®„Éï„Çß„ÇØ„Éà
export interface VideoEffect extends BaseEffect {
  type: 'brightness' | 'contrast' | 'saturation' | 'blur' | 'sharpen'
  parameters: {
    intensity: number // 0-100
  }
}

// „Ç™„Éº„Éá„Ç£„Ç™„Ç®„Éï„Çß„ÇØ„Éà
export interface AudioEffect extends BaseEffect {
  type: 'volume' | 'fade' | 'equalizer'
  parameters: {
    gain?: number // dB
    fadeIn?: number // seconds
    fadeOut?: number // seconds
    bands?: number[] // EQ„Éê„É≥„Éâ
  }
}

// „ÉÜ„Ç≠„Çπ„Éà„Ç®„Éï„Çß„ÇØ„Éà
export interface TextEffect extends BaseEffect {
  type: 'text-overlay'
  parameters: {
    text: string
    fontSize: number
    fontFamily: string
    color: string
    position: { x: number; y: number }
    animation?: 'fade' | 'slide' | 'bounce'
  }
}

// „Éà„É©„É≥„Ç∏„Ç∑„Éß„É≥
export interface Transition {
  id: string
  type: 'fade' | 'dissolve' | 'wipe' | 'slide'
  duration: number // seconds
  parameters: Record<string, any>
}

// „Éï„Ç£„É´„Çø„ÉºÔºàËâ≤Ë™øÊï¥„Å™„Å©Ôºâ
export interface Filter {
  id: string
  type: 'lut' | 'color-correction' | 'vignette'
  enabled: boolean
  parameters: Record<string, any>
}

// „Ç®„Éï„Çß„ÇØ„Éà„É¶„Éã„Ç™„É≥Âûã
export type Effect = VideoEffect | AudioEffect | TextEffect

// „Ç®„Éï„Çß„ÇØ„Éà„Éó„É™„Çª„ÉÉ„Éà
export interface EffectPreset {
  id: string
  name: string
  category: string
  effects: Effect[]
}
```

---

### T017: Project/MediaÂûãÂÆöÁæ©

**„Éï„Ç°„Ç§„É´1**: `types/project.ts`

```typescript
export interface Project {
  id: string
  user_id: string
  name: string
  settings: ProjectSettings
  thumbnail_url?: string
  created_at: string
  updated_at: string
}

export interface ProjectSettings {
  width: number // 1920
  height: number // 1080
  frameRate: number // 30, 60
  sampleRate: number // 48000
  duration: number // seconds
}

export const DEFAULT_PROJECT_SETTINGS: ProjectSettings = {
  width: 1920,
  height: 1080,
  frameRate: 30,
  sampleRate: 48000,
  duration: 0,
}
```

**„Éï„Ç°„Ç§„É´2**: `types/media.ts`

```typescript
export interface MediaFile {
  id: string
  project_id: string
  user_id: string
  file_name: string
  file_type: 'video' | 'audio' | 'image'
  file_size: number // bytes
  storage_path: string
  thumbnail_url?: string
  duration?: number // seconds (video/audio„ÅÆ„Åø)
  width?: number // pixels (video/image„ÅÆ„Åø)
  height?: number // pixels (video/image„ÅÆ„Åø)
  metadata: MediaMetadata
  created_at: string
}

export interface MediaMetadata {
  codec?: string
  bitrate?: number
  channels?: number // audio
  fps?: number // video
  [key: string]: any
}

export interface MediaUploadProgress {
  fileName: string
  progress: number // 0-100
  status: 'pending' | 'uploading' | 'processing' | 'completed' | 'error'
  error?: string
}
```

---

### T018: SupabaseÂûãÁîüÊàê

**ÊñπÊ≥ï1: Ëá™ÂãïÁîüÊàêÔºàÊé®Â•®Ôºâ**

```bash
# Supabase CLI„Çí„Ç§„É≥„Çπ„Éà„Éº„É´
npm install --legacy-peer-deps supabase --save-dev

# „É≠„Ç∞„Ç§„É≥
npx supabase login

# ÂûãÁîüÊàê
npx supabase gen types typescript --project-id blvcuxxwiykgcbsduhbc > types/supabase.ts
```

**ÊñπÊ≥ï2: ÊâãÂãï‰ΩúÊàê**

**„Éï„Ç°„Ç§„É´**: `types/supabase.ts`

```typescript
export type Json =
  | string
  | number
  | boolean
  | null
  | { [key: string]: Json | undefined }
  | Json[]

export interface Database {
  public: {
    Tables: {
      projects: {
        Row: {
          id: string
          user_id: string
          name: string
          settings: Json
          thumbnail_url: string | null
          created_at: string
          updated_at: string
        }
        Insert: {
          id?: string
          user_id: string
          name: string
          settings?: Json
          thumbnail_url?: string | null
          created_at?: string
          updated_at?: string
        }
        Update: {
          id?: string
          user_id?: string
          name?: string
          settings?: Json
          thumbnail_url?: string | null
          created_at?: string
          updated_at?: string
        }
      }
      media_files: {
        Row: {
          id: string
          project_id: string
          user_id: string
          file_name: string
          file_type: string
          file_size: number
          storage_path: string
          thumbnail_url: string | null
          duration: number | null
          width: number | null
          height: number | null
          metadata: Json
          created_at: string
        }
        Insert: {
          id?: string
          project_id: string
          user_id: string
          file_name: string
          file_type: string
          file_size: number
          storage_path: string
          thumbnail_url?: string | null
          duration?: number | null
          width?: number | null
          height?: number | null
          metadata?: Json
          created_at?: string
        }
        Update: {
          id?: string
          project_id?: string
          user_id?: string
          file_name?: string
          file_type?: string
          file_size?: number
          storage_path?: string
          thumbnail_url?: string | null
          duration?: number | null
          width?: number | null
          height?: number | null
          metadata?: Json
          created_at?: string
        }
      }
      // ‰ªñ„ÅÆ„ÉÜ„Éº„Éñ„É´„ÇÇÂêåÊßò„Å´ÂÆöÁæ©...
    }
  }
}
```

---

### T019: „É¨„Ç§„Ç¢„Ç¶„ÉàÊßãÈÄ†

**„Éï„Ç°„Ç§„É´1**: `app/(auth)/layout.tsx`

```typescript
import { ReactNode } from 'react'

export default function AuthLayout({ children }: { children: ReactNode }) {
  return (
    <div className="min-h-screen flex items-center justify-center bg-background">
      <div className="w-full max-w-md p-8">
        {children}
      </div>
    </div>
  )
}
```

**„Éï„Ç°„Ç§„É´2**: `app/(editor)/layout.tsx`

```typescript
import { ReactNode } from 'react'
import { redirect } from 'next/navigation'
import { createClient } from '@/lib/supabase/server'

export default async function EditorLayout({ children }: { children: ReactNode }) {
  const supabase = await createClient()
  const { data: { user } } = await supabase.auth.getUser()

  if (!user) {
    redirect('/login')
  }

  return (
    <div className="h-screen flex flex-col bg-background">
      {children}
    </div>
  )
}
```

**„Éï„Ç°„Ç§„É´3**: `app/(auth)/login/page.tsx`Ôºà„Çµ„É≥„Éó„É´Ë™çË®º„Éö„Éº„Ç∏Ôºâ

```typescript
'use client'

import { Button } from '@/components/ui/button'
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'
import { createClient } from '@/lib/supabase/client'

export default function LoginPage() {
  const supabase = createClient()

  const handleGoogleLogin = async () => {
    await supabase.auth.signInWithOAuth({
      provider: 'google',
      options: {
        redirectTo: `${window.location.origin}/auth/callback`,
      },
    })
  }

  return (
    <Card>
      <CardHeader>
        <CardTitle>ProEdit „Å∏„Çà„ÅÜ„Åì„Åù</CardTitle>
        <CardDescription>
          Google„Ç¢„Ç´„Ç¶„É≥„Éà„Åß„É≠„Ç∞„Ç§„É≥„Åó„Å¶„Åè„Å†„Åï„ÅÑ
        </CardDescription>
      </CardHeader>
      <CardContent>
        <Button 
          onClick={handleGoogleLogin} 
          className="w-full"
        >
          Google „Åß„É≠„Ç∞„Ç§„É≥
        </Button>
      </CardContent>
    </Card>
  )
}
```

---

### T020: „Ç®„É©„Éº„Éè„É≥„Éâ„É™„É≥„Ç∞

**„Éï„Ç°„Ç§„É´1**: `app/error.tsx`

```typescript
'use client'

import { useEffect } from 'react'
import { Button } from '@/components/ui/button'
import { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert'
import { AlertCircle } from 'lucide-react'

export default function Error({
  error,
  reset,
}: {
  error: Error & { digest?: string }
  reset: () => void
}) {
  useEffect(() => {
    console.error('Application error:', error)
  }, [error])

  return (
    <div className="min-h-screen flex items-center justify-center p-4">
      <Alert variant="destructive" className="max-w-md">
        <AlertCircle className="h-4 w-4" />
        <AlertTitle>„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü</AlertTitle>
        <AlertDescription className="mt-2">
          {error.message || '‰∫àÊúü„Åó„Å™„ÅÑ„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü„ÄÇ'}
        </AlertDescription>
        <Button 
          onClick={reset} 
          variant="outline" 
          className="mt-4"
        >
          ÂÜçË©¶Ë°å
        </Button>
      </Alert>
    </div>
  )
}
```

**„Éï„Ç°„Ç§„É´2**: `app/loading.tsx`

```typescript
import { Skeleton } from '@/components/ui/skeleton'

export default function Loading() {
  return (
    <div className="h-screen flex flex-col p-4 gap-4">
      <Skeleton className="h-16 w-full" />
      <div className="flex gap-4 flex-1">
        <Skeleton className="w-64 h-full" />
        <Skeleton className="flex-1 h-full" />
      </div>
    </div>
  )
}
```

**„Éï„Ç°„Ç§„É´3**: `app/not-found.tsx`

```typescript
import Link from 'next/link'
import { Button } from '@/components/ui/button'

export default function NotFound() {
  return (
    <div className="min-h-screen flex items-center justify-center">
      <div className="text-center">
        <h1 className="text-4xl font-bold mb-4">404</h1>
        <p className="text-muted-foreground mb-4">
          „Éö„Éº„Ç∏„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü
        </p>
        <Button asChild>
          <Link href="/">„Éõ„Éº„É†„Å´Êàª„Çã</Link>
        </Button>
      </div>
    </div>
  )
}
```

---

### T021: Adobe Premiere ProÈ¢®„ÉÜ„Éº„ÉûÈÅ©Áî®

**„Éï„Ç°„Ç§„É´**: `app/globals.css` „ÅÆÊõ¥Êñ∞

Êó¢Â≠ò„ÅÆ„Éï„Ç°„Ç§„É´„Å´‰ª•‰∏ã„Çí**ËøΩÂä†**:

```css
/* Adobe Premiere ProÈ¢®„ÉÄ„Éº„ÇØ„ÉÜ„Éº„Éû */
:root {
  /* Premiere Pro „Ç´„É©„Éº„Éë„É¨„ÉÉ„Éà */
  --premiere-bg-darkest: #1a1a1a;
  --premiere-bg-dark: #232323;
  --premiere-bg-medium: #2e2e2e;
  --premiere-bg-light: #3a3a3a;
  
  --premiere-accent-blue: #2196f3;
  --premiere-accent-teal: #1ee3cf;
  
  --premiere-text-primary: #d9d9d9;
  --premiere-text-secondary: #a8a8a8;
  --premiere-text-disabled: #666666;
  
  --premiere-border: #3e3e3e;
  --premiere-hover: #404040;
  
  /* Timeline colors */
  --timeline-video: #6366f1;
  --timeline-audio: #10b981;
  --timeline-ruler: #525252;
  
  /* „Ç∑„É£„Éâ„Ç¶ */
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.5);
  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.6);
  --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.7);
}

.dark {
  --background: var(--premiere-bg-dark);
  --foreground: var(--premiere-text-primary);
  
  --card: var(--premiere-bg-medium);
  --card-foreground: var(--premiere-text-primary);
  
  --primary: var(--premiere-accent-blue);
  --primary-foreground: #ffffff;
  
  --secondary: var(--premiere-bg-light);
  --secondary-foreground: var(--premiere-text-primary);
  
  --muted: var(--premiere-bg-light);
  --muted-foreground: var(--premiere-text-secondary);
  
  --accent: var(--premiere-accent-teal);
  --accent-foreground: var(--premiere-bg-darkest);
  
  --border: var(--premiere-border);
  --input: var(--premiere-bg-light);
  --ring: var(--premiere-accent-blue);
}

/* „Ç´„Çπ„Çø„É†„Çπ„ÇØ„É≠„Éº„É´„Éê„Éº */
::-webkit-scrollbar {
  width: 12px;
  height: 12px;
}

::-webkit-scrollbar-track {
  background: var(--premiere-bg-darkest);
}

::-webkit-scrollbar-thumb {
  background: var(--premiere-bg-light);
  border-radius: 6px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--premiere-hover);
}

/* „Çø„Ç§„É†„É©„Ç§„É≥„Çπ„Çø„Ç§„É´ */
.timeline-track {
  background: var(--premiere-bg-medium);
  border: 1px solid var(--premiere-border);
  border-radius: 4px;
}

.timeline-clip-video {
  background: var(--timeline-video);
  border-left: 2px solid rgba(255, 255, 255, 0.2);
}

.timeline-clip-audio {
  background: var(--timeline-audio);
  border-left: 2px solid rgba(255, 255, 255, 0.2);
}

/* „Éó„É≠„Éë„ÉÜ„Ç£„Éë„Éç„É´ */
.property-panel {
  background: var(--premiere-bg-medium);
  border-left: 1px solid var(--premiere-border);
}

.property-group {
  border-bottom: 1px solid var(--premiere-border);
  padding: 12px;
}

/* „ÉÑ„Éº„É´„Éê„Éº */
.toolbar {
  background: var(--premiere-bg-darkest);
  border-bottom: 1px solid var(--premiere-border);
  height: 48px;
  display: flex;
  align-items: center;
  padding: 0 16px;
  gap: 8px;
}

.toolbar-button {
  background: transparent;
  border: 1px solid transparent;
  color: var(--premiere-text-secondary);
  padding: 6px 12px;
  border-radius: 4px;
  transition: all 0.2s;
}

.toolbar-button:hover {
  background: var(--premiere-hover);
  color: var(--premiere-text-primary);
}

.toolbar-button.active {
  background: var(--premiere-accent-blue);
  color: white;
  border-color: var(--premiere-accent-blue);
}

/* „É°„Éá„Ç£„Ç¢„Éñ„É©„Ç¶„Ç∂ */
.media-browser {
  background: var(--premiere-bg-medium);
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  gap: 8px;
  padding: 12px;
}

.media-item {
  aspect-ratio: 16/9;
  background: var(--premiere-bg-darkest);
  border: 1px solid var(--premiere-border);
  border-radius: 4px;
  overflow: hidden;
  cursor: pointer;
  transition: all 0.2s;
}

.media-item:hover {
  border-color: var(--premiere-accent-blue);
  transform: scale(1.05);
}

.media-item.selected {
  border-color: var(--premiere-accent-teal);
  border-width: 2px;
}
```

---

## üì¶ ÂøÖË¶Å„Å™‰æùÂ≠òÈñ¢‰øÇ„ÅÆ‰∏ÄÊã¨„Ç§„É≥„Çπ„Éà„Éº„É´

Phase 2„ÅßÂøÖË¶Å„Å™ÂÖ®„Éë„ÉÉ„Ç±„Éº„Ç∏„Çí‰∏ÄÊã¨„Ç§„É≥„Çπ„Éà„Éº„É´:

```bash
cd /Users/teradakousuke/Developer/ProEdit

npm install --legacy-peer-deps \
  @supabase/ssr \
  @supabase/supabase-js \
  zustand \
  pixi.js \
  @ffmpeg/ffmpeg \
  @ffmpeg/util

npm install --legacy-peer-deps --save-dev \
  supabase
```

---

## ‚úÖ Phase 2 ÂÆå‰∫Ü„ÉÅ„Çß„ÉÉ„ÇØ„É™„Çπ„Éà

Phase 2ÂÆå‰∫ÜÊôÇ„Å´‰ª•‰∏ã„Çí„Åô„Åπ„Å¶Á¢∫Ë™ç:

### SupabaseË®≠ÂÆö
```bash
[ ] lib/supabase/client.ts ‰ΩúÊàêÊ∏à„Åø
[ ] lib/supabase/server.ts ‰ΩúÊàêÊ∏à„Åø
[ ] lib/supabase/utils.ts ‰ΩúÊàêÊ∏à„Åø
[ ] Supabase„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ„ÅßÂÖ®„ÉÜ„Éº„Éñ„É´‰ΩúÊàêÁ¢∫Ë™ç
[ ] RLS„Éù„É™„Ç∑„Éº„Åô„Åπ„Å¶ÈÅ©Áî®Á¢∫Ë™ç
[ ] media-files„Éê„Ç±„ÉÉ„Éà‰ΩúÊàêÁ¢∫Ë™ç
[ ] Google OAuthË®≠ÂÆöÂÆå‰∫Ü
[ ] app/auth/callback/route.ts ‰ΩúÊàêÊ∏à„Åø
```

### „Ç≥„Ç¢„É©„Ç§„Éñ„É©„É™
```bash
[ ] stores/index.ts ‰ΩúÊàêÊ∏à„ÅøÔºàZustandÔºâ
[ ] lib/pixi/setup.ts ‰ΩúÊàêÊ∏à„Åø
[ ] lib/ffmpeg/loader.ts ‰ΩúÊàêÊ∏à„Åø
```

### ÂûãÂÆöÁæ©
```bash
[ ] types/effects.ts ‰ΩúÊàêÊ∏à„Åø
[ ] types/project.ts ‰ΩúÊàêÊ∏à„Åø
[ ] types/media.ts ‰ΩúÊàêÊ∏à„Åø
[ ] types/supabase.ts ‰ΩúÊàêÊ∏à„Åø
```

### UIÊßãÈÄ†
```bash
[ ] app/(auth)/layout.tsx ‰ΩúÊàêÊ∏à„Åø
[ ] app/(auth)/login/page.tsx ‰ΩúÊàêÊ∏à„Åø
[ ] app/(editor)/layout.tsx ‰ΩúÊàêÊ∏à„Åø
[ ] app/error.tsx ‰ΩúÊàêÊ∏à„Åø
[ ] app/loading.tsx ‰ΩúÊàêÊ∏à„Åø
[ ] app/not-found.tsx ‰ΩúÊàêÊ∏à„Åø
[ ] app/globals.css „Å´Premiere ProÈ¢®„ÉÜ„Éº„ÉûËøΩÂä†
```

### Âãï‰ΩúÁ¢∫Ë™ç
```bash
[ ] npm run dev Ëµ∑ÂãïÊàêÂäü
[ ] npm run lint „Ç®„É©„Éº„Å™„Åó
[ ] npm run type-check „Ç®„É©„Éº„Å™„Åó
[ ] http://localhost:3000/login „Å´„Ç¢„ÇØ„Çª„ÇπÂèØËÉΩ
[ ] Google„É≠„Ç∞„Ç§„É≥„Éú„Çø„É≥Ë°®Á§∫
```

---

## üé¨ Ê¨°„ÅÆ„ÉÅ„É£„ÉÉ„Éà„ÅßÊúÄÂàù„Å´Ë®Ä„ÅÜ„Åì„Å®

```markdown
ProEdit MVP Phase 2„ÅÆÂÆüË£Ö„ÇíÈñãÂßã„Åó„Åæ„Åô„ÄÇ

HANDOVER_PHASE2.md„ÅÆÂÜÖÂÆπ„Å´Âæì„Å£„Å¶„ÄÅPhase 2: FoundationÔºàT007-T021Ôºâ„ÇíÂÆüË£Ö„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ

„ÄêÂÆüË£ÖÊâãÈ†Ü„Äë
1. ‰æùÂ≠òÈñ¢‰øÇ„ÅÆ‰∏ÄÊã¨„Ç§„É≥„Çπ„Éà„Éº„É´
2. SupabaseË®≠ÂÆöÔºàclient, server, utilsÔºâ
3. „Éá„Éº„Çø„Éô„Éº„Çπ„Éû„Ç§„Ç∞„É¨„Éº„Ç∑„Éß„É≥ + RLS„Éù„É™„Ç∑„Éº
4. StorageË®≠ÂÆö + Google OAuth
5. „Ç≥„Ç¢„É©„Ç§„Éñ„É©„É™ÔºàZustand, PIXI.js, FFmpegÔºâ
6. ÂûãÂÆöÁæ©Ôºàeffects, project, media, supabaseÔºâ
7. UI„É¨„Ç§„Ç¢„Ç¶„Éà + „Ç®„É©„Éº„Éè„É≥„Éâ„É™„É≥„Ç∞
8. „ÉÜ„Éº„ÉûÈÅ©Áî®

ÂÆå‰∫ÜÂæå„ÄÅPhase 2ÂÆå‰∫Ü„ÉÅ„Çß„ÉÉ„ÇØ„É™„Çπ„Éà„Åß„Åô„Åπ„Å¶Á¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ
```

---

## üîß „Éà„É©„Éñ„É´„Ç∑„É•„Éº„ÉÜ„Ç£„É≥„Ç∞

### ÂïèÈ°å1: npm install„Åßpeer dependency„Ç®„É©„Éº

**Ëß£Ê±∫Á≠ñ**: Â∏∏„Å´`--legacy-peer-deps`„Éï„É©„Ç∞„Çí‰ΩøÁî®
```bash
npm install --legacy-peer-deps <package>
```

### ÂïèÈ°å2: SupabaseÊé•Á∂ö„Ç®„É©„Éº

**Á¢∫Ë™ç‰∫ãÈ†Ö**:
1. `.env.local`„ÅÆÁí∞Â¢ÉÂ§âÊï∞„ÅåÊ≠£„Åó„ÅÑ„Åã
2. Supabase„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÅåËµ∑Âãï„Åó„Å¶„ÅÑ„Çã„Åã
3. `NEXT_PUBLIC_`„Éó„É¨„Éï„Ç£„ÉÉ„ÇØ„Çπ„Åå„ÅÇ„Çã„Åã

**„Éá„Éê„ÉÉ„Ç∞**:
```typescript
console.log('Supabase URL:', process.env.NEXT_PUBLIC_SUPABASE_URL)
console.log('Anon Key:', process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY?.slice(0, 20))
```

### ÂïèÈ°å3: TypeScript„Ç®„É©„Éº

**Ëß£Ê±∫Á≠ñ**: `tsconfig.json`„ÅÆ`strict`Ë®≠ÂÆö„ÇíÁ¢∫Ë™ç
```json
{
  "compilerOptions": {
    "strict": true,
    "noImplicitAny": true
  }
}
```

### ÂïèÈ°å4: CORS „Ç®„É©„ÉºÔºàFFmpeg.wasmÔºâ

**Á¢∫Ë™ç**: `next.config.ts`„ÅÆheadersË®≠ÂÆö„ÅåÊ≠£„Åó„ÅÑ„Åã
```typescript
headers: [
  { key: "Cross-Origin-Embedder-Policy", value: "require-corp" },
  { key: "Cross-Origin-Opener-Policy", value: "same-origin" }
]
```

---

## üìû ÈáçË¶Å„Å™ÂèÇÁÖß„Éâ„Ç≠„É•„É°„É≥„Éà

### Phase 2ÂÆüË£ÖÊôÇ„Å´ÂèÇÁÖß
1. **specs/001-proedit-mvp-browser/data-model.md** - DB„Çπ„Ç≠„Éº„ÉûË©≥Á¥∞
2. **specs/001-proedit-mvp-browser/quickstart.md** - SupabaseË®≠ÂÆöÊâãÈ†Ü
3. **specs/001-proedit-mvp-browser/tasks.md** - „Çø„Çπ„ÇØË©≥Á¥∞ÔºàT007-T021Ôºâ
4. **vendor/omniclip/s/context/types.ts** - EffectÂûãÂÆöÁæ©„ÅÆÂèÇÁÖßÂÖÉ
5. **OMNICLIP_IMPLEMENTATION_ANALYSIS.md** - ÂÆüË£Ö„Éë„Çø„Éº„É≥

### ÊäÄË°ì„Éâ„Ç≠„É•„É°„É≥„Éà
- [Supabase Auth (SSR)](https://supabase.com/docs/guides/auth/server-side/nextjs)
- [PIXI.js v8 Migration Guide](https://pixijs.com/8.x/guides/migrations/v8)
- [FFmpeg.wasm Documentation](https://ffmpegwasm.netlify.app/)
- [Zustand Documentation](https://docs.pmnd.rs/zustand/getting-started/introduction)

---

## üéØ Phase 2ÂÆå‰∫ÜÂæå„ÅÆÊ¨°„ÅÆ„Çπ„ÉÜ„ÉÉ„Éó

Phase 2„ÅåÂÆå‰∫Ü„Åó„Åü„Çâ„ÄÅ**Phase 3: User Story 1ÔºàË™çË®º + „Éó„É≠„Ç∏„Çß„ÇØ„ÉàÁÆ°ÁêÜÔºâ** „Å´ÈÄ≤„Åø„Åæ„Åô„ÄÇ

Phase 3„ÅÆÊ¶ÇË¶Å:
- US1ÂÆüË£Ö: GoogleË™çË®º + „Éó„É≠„Ç∏„Çß„ÇØ„ÉàÁÆ°ÁêÜUI
- Êé®ÂÆöÊôÇÈñì: 6ÊôÇÈñì
- „Çø„Çπ„ÇØ: T022-T030

**Phase 3„ÅØÊñ∞„Åó„ÅÑ„ÉÅ„É£„ÉÉ„Éà„ÅßÈñãÂßã„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ**

---

## üìä „Éó„É≠„Ç∏„Çß„ÇØ„ÉàÂÖ®‰Ωì„ÅÆÈÄ≤Êçó

```
Phase 1: Setup          ‚úÖ 70% („Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÈÄ†ÂÆå‰∫Ü)
Phase 2: Foundation     üéØ Ê¨°„ÅÆ„Çπ„ÉÜ„ÉÉ„ÉóÔºà„Åì„ÅÆ„Éâ„Ç≠„É•„É°„É≥„ÉàÔºâ
Phase 3-4: MVP Core     ‚è≥ Phase 2ÂÆå‰∫ÜÂæå
Phase 5-7: Á∑®ÈõÜÊ©üËÉΩ     ‚è≥ Phase 4ÂÆå‰∫ÜÂæå
Phase 8-9: Export       ‚è≥ Phase 7ÂÆå‰∫ÜÂæå
Phase 10: Polish        ‚è≥ ÊúÄÁµÇÊÆµÈöé
```

---

**„Åì„ÅÆ„Éâ„Ç≠„É•„É°„É≥„Éà„Åß Phase 2 „ÅÆÂÆüË£Ö„Çí„Çπ„É†„Éº„Ç∫„Å´ÈñãÂßã„Åß„Åç„Åæ„ÅôÔºÅ** üöÄ

**‰ΩúÊàêËÄÖ**: Claude (2025-10-14)  
**„Éâ„Ç≠„É•„É°„É≥„Éà„Éê„Éº„Ç∏„Éß„É≥**: 2.0.0  
**ÂØæË±°„Éï„Çß„Éº„Ç∫**: Phase 2 Foundation (T007-T021)